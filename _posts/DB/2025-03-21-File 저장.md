---
layout : archive
title : File 저장
categories : DB
date : 2025-03-21
---
## DB File 저장

### 저장 방식

#### 정적 파일에 저장

클라우드 서비스를 이용하여 파일을 저장

- 장점
    - 대용량 파일 저장 가능
    - 글로벌 배포가 가능하며 빠른 응답 속도 제공 (CDN 연계 가능)
    - 서비스의 디스크 부담이 줄어듦
    - 데이터 복원, 백업, 보안 기능을 클라우드에서 제공하기 때문에 강력함  

- 단점
    - 클라우드 사용 비용 발생
    - 클라우드 서비스 장애 발생 시 접근 불가능

#### 서버에 저장 및 DB에 경로 저장

파일을 서버의 특정 파일에 저장

- 장점
    - 구현이 간단하고 빠름
    - 서버 내에서 직접 파일 접근 가능
    - 클라우드 서비스와 다르게 비용이 필요하지않음

- 단점
    - 서버 용량 제한이 문제될 수 있음
    - 서버 장애 발생 시 파일 손실 위험 있음

#### Binary 파일로 변환 후 저장

파일을 바이너리 데이터(Blob)로 변환 후 DB 테이블에 저장

- 장점
    - DB 백업 시 파일까지 포함되어 안정적
    - 분산된 서버에서도 동일한 방식으로 접근 가능

- 단점
    - DB 저장소 용량 증가로 성능 저하 발생
    - 성능 저하로 파일 검색 및 처리 속도가 느려질 수 있음
    - DB에서 직접 파일을 처리하는 것이 복잡함


### MySQL 캐시 메모리 동작 과정

InnoDB 버퍼 풀(InnoDB Buffer Pool)

- 작동 방식
    - 디스크에서 읽은 데이터를 메모리에 저장하여 재사용
    - LRU(Least Recently Used) 알고리즘을 사용하여 오래된 데이터부터 제거
    - MySQL 서버가 종료되면 캐시는 사라짐

> What? LRU: 최근에 가장 적게 사용된 것부터 제거하는 알고리즘으로 메모리가 부족하면 LRU 리스트의 오래된 데이터부터 제거된다.

- 구성 요소
    - 데이터 페이지 캐시: 메모리에서 직접 조회
    - 인덱스 캐시: B-Tree 인덱스
    - 변경 버퍼: INSERT, UPDATE, DELETE 시 즉시 디스크에 반영하지 않고 메모리에 저장 후 일정 시간 후 반영