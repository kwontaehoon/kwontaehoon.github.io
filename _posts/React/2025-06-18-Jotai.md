---
layout : archive
title : Jotai
categories : React
date : 2025-06-18
---

## Jotai

React에서 사용가능한 아주 간단한 atomic 상태 라이브러리


### Jotai를 왜 사용하는가?



### Jotai의 주요 개념

1. Atom

- 읽기 전용 atom
```javascript
// read + write
const countAtom = atom(10)

// readOnly
const doubleCountAtom = atom((get) => get(countAtom) * 2)
```
- 쓰기 전용 atom
```javascript
// writeOnly
export const incrementAtom = atom(null, (get, set, update) => {
    set(countAtom, get(countAtom) + 1)
})
```
- 읽기 + 쓰기 atom
```javascript
const countAtom = atom(10)
```

2. useAtom은 원자를 읽는데 사용하며 write 함수(setState)가 추가됩니다.
```javascript
const [value, setValue] = useAtom(countAtom)
```

- useAtomValue와 useSetAtom
```javascript
const count = useAtomValue(countAtom)
const setCount  = useSetAtom(countAtom)
```

> why? useAtomValue와 useSetAtom을 왜 나눠서 사용할까?

useAtomValue()만 쓰면 해당 atom의 값이 변경될 때만 리렌더링되지만
useSetAtom()만 쓰면 값 변화에 영향을 받지 않고 리렌더링이 되지않기 때문입니다.

```javascript
function ReadOnlyFunc() {
    const count = useAtomValue(countAtom); // 값만 읽음
    console.log('ReadOnly 렌더링');
    return <div>Count: {count}</div>;
}

function WriteOnlyFunc() {
    const increment = useSetAtom(countAtom); // 값은 읽지 않음
    console.log('WriteOnly 렌더링');
    return <button onClick={() => increment((prev) => prev + 1)}>+1</button>;
    // 버튼을 누르면 ReadOnlyFunc만 리렌더링이 발생합니다.
}

function MyApp() {
    return(
        <>
            <ReadOnlyFunc />
            <WriteOnlyFunc />
        </>
    )
}
```

3. atomWithStorage의 기본 저장소는 localStorage입니다.
```javascript
const darkModeAtom = atomWithStorage('darkMode', false)
function MyApp() {
    
    return(
        <>
        <h1>Welcome to {darkMode ? 'dark' : 'light'} mode!</h1>

        {/* setState */}
        <button onClick={() => setDarkMode(!darkMode)}>toggle theme</button>

        {/* reset */}
        <button onClick={() => setDarkMode(RESET)}>Reset (to 'hello')</button>

        {/* setState or reset*/}
        <button onClick={() => setIsVisible((prev) => prev ? RESET : true)}>Toggle visible</button>
        </>
    )
}
```